<!-- index.wxml -->
<view class="index-header" style="padding-top: {{headerPaddingTop}}px;">
  <view class="header-top">
    <view class="header-logo">
      <image class="logo" src="/assets/logo/logo.png" mode="aspectFit"></image>
      <view class="logo-text">
        <text class="text-2">é£Ÿæ¨</text>
        <text class="text-4">å°æ™º</text>
      </view>
      <!-- <image class="logo-text" src="/assets/logo/logo-text.png" mode="aspectFit"></image> -->
    </view>
  </view>
  <!-- <view class="header-slogan">
    <text>ä½ çš„æ¯æ—¥é£Ÿè°±æ¨èè´´å¿ƒåŠ©æ‰‹</text>
  </view> -->
  <view class="search-container">
    <view class="search-box">
      <image class="search-icon" src="/assets/index/home-search.png" mode="aspectFit"></image>
      <input class="search-input" placeholder="æœç´¢é£Ÿè°±æˆ–é£Ÿç‰©" placeholder-style="color: #999;" confirm-type="search" bindconfirm="onSearch" value="{{searchKeyword}}" bindinput="onSearchInput" />
      <view class="search-divider"></view>
      <view class="search-btn" bindtap="onSearchBtn">
        <text>æœç´¢</text>
      </view>
    </view>
  </view>
</view>
<scroll-view class="scrollarea" scroll-y type="list">
  <view class="container">
    <!-- è½®æ’­å›¾ -->
    <view class="banner-section">
      <swiper class="banner-swiper" indicator-dots indicator-color="rgba(255,255,255,0.5)" indicator-active-color="#B6CF99" autoplay circular interval="5000">
        <swiper-item wx:for="{{banners}}" wx:key="id">
          <image class="banner-image" src="{{item.image}}" mode="aspectFill"></image>
        </swiper-item>
      </swiper>
    </view>
    <!-- ä»Šæ—¥é£Ÿè°±å¡ç‰‡ï¼ˆæ•´åˆAIç”Ÿæˆå’Œé£Ÿè°±å±•ç¤ºï¼‰ -->
    <view class="today-recipe-wrapper">
      <!-- AIæ™ºèƒ½ç”ŸæˆæŒ‰é’® -->
      <view class="ai-generate-btn" bindtap="onAIGenerate">
        <view class="ai-icon">
          <image src="/assets/index/icon-meihua.png" mode="aspectFit"></image>
        </view>
        <text class="ai-text">ä¸€é”®æ™ºèƒ½ç”Ÿæˆä»Šæ—¥é£Ÿè°±</text>
        <view class="ai-arrow">
          <image src="/assets/index/icon-xiaozhi.png" mode="aspectFit"></image>
        </view>
      </view>
      <!-- ä»Šæ—¥é£Ÿè°±å¡ç‰‡ -->
      <view class="today-recipe-card">
        <!-- å¡ç‰‡å¤´éƒ¨ -->
        <view class="recipe-card-header">
          <view class="recipe-title-row">
            <view class="title-left">
              <text class="recipe-title">{{todayRecipe.title}}</text>
              <view class="recipe-date">
                <text class="date-text">{{todayRecipe.date}}</text>
                <text class="weekday-text">{{todayRecipe.weekday}}</text>
              </view>
            </view>
          </view>
          <text class="recipe-description">{{todayRecipe.description}}</text>
        </view>
        <!-- è¥å…»æ•°æ®ç»Ÿè®¡ -->
        <view class="recipe-stats">
          <view class="stat-item">
            <text class="stat-value">{{todayRecipe.totalCalories}}</text>
            <text class="stat-label">æ€»çƒ­é‡(åƒå¡)</text>
          </view>
          <view class="stat-divider"></view>
          <view class="stat-item">
            <text class="stat-value">{{todayRecipe.totalProtein}}g</text>
            <text class="stat-label">è›‹ç™½è´¨</text>
          </view>
          <view class="stat-divider"></view>
          <view class="stat-item">
            <text class="stat-value">{{todayRecipe.totalCarbs}}g</text>
            <text class="stat-label">ç¢³æ°´</text>
          </view>
          <view class="stat-divider"></view>
          <view class="stat-item">
            <text class="stat-value">{{todayRecipe.totalFat}}g</text>
            <text class="stat-label">è„‚è‚ª</text>
          </view>
        </view>
        <!-- æ—©é¤ -->
        <view class="meal-section">
          <view class="meal-header">
            <image class="meal-icon" src="/assets/index/icon-zaocan.png" mode="aspectFit"></image>
            <text class="meal-time">{{todayRecipe.meals.breakfast.time}}</text>
            <text class="meal-time-range">{{todayRecipe.meals.breakfast.timeRange}}</text>
            <text class="meal-calories">{{todayRecipe.meals.breakfast.calories}}åƒå¡</text>
          </view>
          <view class="food-list-vertical">
            <view class="food-item-horizontal" wx:for="{{todayRecipe.meals.breakfast.foods}}" wx:key="id" bindtap="navigateToRecipeDetail" data-id="{{item.id}}">
              <image class="food-item-image" src="{{item.image}}" mode="aspectFill"></image>
              <view class="food-item-content">
                <view class="food-item-header">
                  <text class="food-item-name">{{item.name}}</text>
                  <text class="food-item-amount">{{item.amount}}</text>
                </view>
                <view class="food-item-body">
                  <view class="food-item-nutrients">
                    <view class="nutrient-tag">
                      <text class="nutrient-icon">ğŸ”¥</text>
                      <text class="nutrient-text">{{item.calories}}åƒå¡</text>
                    </view>
                    <view class="nutrient-tag">
                      <text class="nutrient-icon">ğŸ’ª</text>
                      <text class="nutrient-text">{{item.protein}}gè›‹ç™½</text>
                    </view>
                    <view class="nutrient-tag">
                      <text class="nutrient-icon">ğŸš</text>
                      <text class="nutrient-text">{{item.carbs}}gç¢³æ°´</text>
                    </view>
                    <view class="nutrient-tag">
                      <text class="nutrient-icon">ğŸ¥‘</text>
                      <text class="nutrient-text">{{item.fat}}gè„‚è‚ª</text>
                    </view>
                  </view>
                  <view class="food-category">{{item.category}}</view>
                </view>
              </view>
            </view>
          </view>
        </view>
        <!-- åˆé¤ -->
        <view class="meal-section">
          <view class="meal-header">
            <image class="meal-icon" src="/assets/index/icon-wucan.png" mode="aspectFit"></image>
            <text class="meal-time">{{todayRecipe.meals.lunch.time}}</text>
            <text class="meal-time-range">{{todayRecipe.meals.lunch.timeRange}}</text>
            <text class="meal-calories">{{todayRecipe.meals.lunch.calories}}åƒå¡</text>
          </view>
          <view class="food-list-vertical">
            <view class="food-item-horizontal" wx:for="{{todayRecipe.meals.lunch.foods}}" wx:key="id" bindtap="navigateToRecipeDetail" data-id="{{item.id}}">
              <image class="food-item-image" src="{{item.image}}" mode="aspectFill"></image>
              <view class="food-item-content">
                <view class="food-item-header">
                  <text class="food-item-name">{{item.name}}</text>
                  <text class="food-item-amount">{{item.amount}}</text>
                </view>
                <view class="food-item-body">
                  <view class="food-item-nutrients">
                    <view class="nutrient-tag">
                      <text class="nutrient-icon">ğŸ”¥</text>
                      <text class="nutrient-text">{{item.calories}}åƒå¡</text>
                    </view>
                    <view class="nutrient-tag">
                      <text class="nutrient-icon">ğŸ’ª</text>
                      <text class="nutrient-text">{{item.protein}}gè›‹ç™½</text>
                    </view>
                    <view class="nutrient-tag">
                      <text class="nutrient-icon">ğŸš</text>
                      <text class="nutrient-text">{{item.carbs}}gç¢³æ°´</text>
                    </view>
                    <view class="nutrient-tag">
                      <text class="nutrient-icon">ğŸ¥‘</text>
                      <text class="nutrient-text">{{item.fat}}gè„‚è‚ª</text>
                    </view>
                  </view>
                  <view class="food-category">{{item.category}}</view>
                </view>
              </view>
            </view>
          </view>
        </view>
        <!-- æ™šé¤ -->
        <view class="meal-section">
          <view class="meal-header">
            <image class="meal-icon" src="/assets/index/icon-wancan.png" mode="aspectFit"></image>
            <text class="meal-time">{{todayRecipe.meals.dinner.time}}</text>
            <text class="meal-time-range">{{todayRecipe.meals.dinner.timeRange}}</text>
            <text class="meal-calories">{{todayRecipe.meals.dinner.calories}}åƒå¡</text>
          </view>
          <view class="food-list-vertical">
            <view class="food-item-horizontal" wx:for="{{todayRecipe.meals.dinner.foods}}" wx:key="id" bindtap="navigateToRecipeDetail" data-id="{{item.id}}">
              <image class="food-item-image" src="{{item.image}}" mode="aspectFill"></image>
              <view class="food-item-content">
                <view class="food-item-header">
                  <text class="food-item-name">{{item.name}}</text>
                  <text class="food-item-amount">{{item.amount}}</text>
                </view>
                <view class="food-item-body">
                  <view class="food-item-nutrients">
                    <view class="nutrient-tag">
                      <text class="nutrient-icon">ğŸ”¥</text>
                      <text class="nutrient-text">{{item.calories}}åƒå¡</text>
                    </view>
                    <view class="nutrient-tag">
                      <text class="nutrient-icon">ğŸ’ª</text>
                      <text class="nutrient-text">{{item.protein}}gè›‹ç™½</text>
                    </view>
                    <view class="nutrient-tag">
                      <text class="nutrient-icon">ğŸš</text>
                      <text class="nutrient-text">{{item.carbs}}gç¢³æ°´</text>
                    </view>
                    <view class="nutrient-tag">
                      <text class="nutrient-icon">ğŸ¥‘</text>
                      <text class="nutrient-text">{{item.fat}}gè„‚è‚ª</text>
                    </view>
                  </view>
                  <view class="food-category">{{item.category}}</view>
                </view>
              </view>
            </view>
          </view>
        </view>
      </view>
    </view>
    <!-- å¿«æ·å…¥å£ -->
    <view class="quick-entry-section">
      <view class="quick-entry-item" bindtap="onNavigate" data-page="diary">
        <view class="entry-icon">
          <image class="entry-icon-image" src="/assets/index/icon-reji.png" mode="aspectFit"></image>
        </view>
        <text class="entry-text">é¥®é£Ÿæ—¥è®°</text>
      </view>
      <view class="quick-entry-item" bindtap="onNavigate" data-page="health">
        <view class="entry-icon">
          <image class="entry-icon-image" src="/assets/index/icon-jiankangdangan.png" mode="aspectFit"></image>
        </view>
        <text class="entry-text">å¥åº·æ¡£æ¡ˆ</text>
      </view>
    </view>
    <!-- é¥®é£Ÿæ‰“å¡ -->
    <view class="section checkin-section">
      <view class="section-header">
        <text class="section-title">ä»Šæ—¥é¥®é£Ÿæ‰“å¡</text>
        <text class="section-subtitle">è®°å½•ä½ çš„å®é™…é¥®é£Ÿ</text>
      </view>
      <view class="checkin-list">
        <view class="checkin-item {{item.checked ? 'checked' : ''}}" wx:for="{{checkinMeals}}" wx:key="type" bindtap="onCheckin" data-type="{{item.type}}">
          <view class="checkin-icon-wrapper">
            <image class="checkin-icon" src="{{item.type === 'breakfast' ? '/assets/index/icon-zaocan.png' : item.type === 'lunch' ? '/assets/index/icon-wucan.png' : '/assets/index/icon-wancan.png'}}" mode="aspectFit"></image>
          </view>
          <text class="checkin-label">{{item.label}}</text>
          <view class="checkin-status">
            <text class="checkin-status-text">{{item.checked ? 'âœ“ å·²æ‰“å¡' : 'æœªæ‰“å¡'}}</text>
          </view>
        </view>
      </view>
    </view>
    <!-- é£Ÿç‰©æ’è¡Œæ¦œ -->
    <view class="section ranking-section">
      <view class="section-header">
        <view class="section-title-wrapper">
          <image class="section-title-icon" src="/assets/index/icon-paihangbang.png" mode="aspectFit"></image>
          <text class="section-title">é£Ÿç‰©æ’è¡Œæ¦œ</text>
        </view>
        <text class="section-more" bindtap="onViewRanking">TOP 10</text>
      </view>
      <view class="ranking-list">
        <view class="ranking-item" wx:for="{{rankings}}" wx:key="id" bindtap="navigateToRecipeDetail" data-id="{{item.id}}">
          <view class="ranking-badge {{item.rank <= 3 ? 'top-three rank-' + item.rank : ''}}">
            {{item.rank}}
          </view>
          <image class="ranking-image" src="{{item.image}}" mode="aspectFill"></image>
          <view class="ranking-info">
            <text class="ranking-name">{{item.name}}</text>
            <view class="ranking-meta">
              <view class="ranking-likes">
                <image class="ranking-icon" src="/assets/index/icon-shouchang.png" mode="aspectFit"></image>
                <text class="ranking-icon-text">{{item.likes}}</text>
              </view>
              <view class="ranking-views">
                <image class="ranking-icon" src="/assets/index/icon-liulan.png" mode="aspectFit"></image>
                <text class="ranking-icon-text">{{item.views}}</text>
              </view>
            </view>
          </view>
        </view>
      </view>
    </view>
    <!-- åº•éƒ¨é—´è· -->
    <view class="bottom-space"></view>
  </view>
</scroll-view>